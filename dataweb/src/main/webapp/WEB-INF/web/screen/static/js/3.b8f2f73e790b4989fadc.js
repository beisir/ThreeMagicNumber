webpackJsonp([3],{111:function(t,e,a){var i=a(12)(a(198),a(218),null,null);t.exports=i.exports},184:function(t,e,a){t.exports={default:a(185),__esModule:!0}},185:function(t,e,a){a(187),t.exports=a(3).Object.keys},186:function(t,e,a){var i=a(8),n=a(3),r=a(21);t.exports=function(t,e){var a=(n.Object||{})[t]||Object[t],s={};s[t]=e(a),i(i.S+i.F*r(function(){a(1)}),"Object",s)}},187:function(t,e,a){var i=a(40),n=a(39);a(186)("keys",function(){return function(t){return n(i(t))}})},188:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(104),n=a.n(i),r=a(103),s=a.n(r),o=a(184),l=a.n(o);e.default={name:"chart-tendency",props:{chartTitle:{default:function(){return"趋势图"}},isShow:{default:function(){return!1}},navigation:{default:function(){return[]}},enums:{default:function(){return{timelimit:{today:{name:"今天",code:"0"},lastsevensays:{name:"最近七天",code:"1"},lastmonth:{name:"最近一个月",code:"2"},thismonth:{name:"本月数据",code:"8"},all:{name:"累计",code:"3"},weekly:{name:"周度数据",code:"4"},monthly:{name:"月度数据",code:"5"},Splitbyfinancial:{name:"按财务拆分",code:"6"},Splitbysalesorder:{name:"按销售订单拆分",code:"7"},numberPeople:{name:"按竞价人数排序",code:"10"},price:{name:"按竞价价格排序",code:"11"}}}}},service:{default:function(){return{url:""}}},chartOptions:{default:function(){return{title:{text:null},chart:{type:"spline"},colors:["#19c6Ed","#FF7C4D","#2BCC6B","#C275DF"],credits:{enabled:!1},tooltip:{formatter:null,shared:!0}}}},timermillisec:{default:function(){return 66e4}},chartEntityConstructor:{default:function(){return Highcharts.chart}},resetYAxisBeforeRedraw:{default:function(){return!0}},resetSeriesBeforeRedraw:{default:function(){return!0}}},data:function(){var t=this;t.navigation.forEach(function(e,a){e.filterEntities={};var i=(e.filters||{}).timelimit,n=t.enums.timelimit;n&&i&&(e.filterEntities.timelimit=(i||[]).map(function(t,e){if(n[t])return n[t]}))});var e=t.navigation;return l()(t.$privileges.mapping).length&&(e=e.filter(function(e){return t.$privileges.user[(t.$privileges.mapping[e.name]||{}).id]})||[]),{Navigation:e,CurrentNavigation:e[0]||{filterEntities:{}},CurrentTimelimitFilter:(((e[0]||{}).filterEntities||{}).timelimit||[])[0]||{},chartEntity:null,renderTimer:null,swiperOption:{slidesPerView:"auto",freeMode:!0}}},mounted:function(){var t=this;(t.Navigation.length>0||t.isShow)&&(setTimeout(function(){t.render()}),t.timermillisec&&(t.renderTimer=window.setInterval(function(){t.render()},t.timermillisec)))},beforeDestroy:function(){var t=this;window.clearInterval(t.renderTimer)},methods:{render:function(){var t=this,e=t.getData(),a=s()({},t.chartOptions);t.$emit("beforeRender",a),t.chartEntity?t.chartEntity.update(a,!1):t.chartEntity=new t.chartEntityConstructor(t.$refs.chartContainer,a),e.then(function(e){for(;t.resetYAxisBeforeRedraw&&t.chartEntity.yAxis.length>0;)t.chartEntity.yAxis[0].remove(!1);for(;t.resetSeriesBeforeRedraw&&t.chartEntity.series.length>0;)t.chartEntity.series[0].remove(!1);t.$emit("dataReady",e),(e.dataList||[]).forEach(function(i,n){t.chartEntity.addAxis({title:{text:null},labels:{format:"{value}"+i.unit,style:{color:a.colors[n]}},opposite:n%2==1},!1,!1),t.chartEntity.addSeries({name:i.name,marker:{enabled:!1},visible:i.isShow,data:i.data,tooltip:{valueSuffix:i.unit},yAxis:n},!1),t.chartEntity.xAxis[0].update({categories:e.time},!1)}),t.$emit("beforeRedraw",t.chartEntity),t.chartEntity.redraw()}),t.$emit("afterRender",t.chartEntity)},getData:function(){var t=this,e={url:t.service.url,params:s()({},t.service.params,{type:t.CurrentNavigation.code,time:t.CurrentTimelimitFilter.code})};return t.$emit("beforeGetData",e),e.promise?e.promise:new n.a(function(a,i){t.$http.get(e.url,{params:e.params}).then(function(e){if(e=e.body||{},0!==parseInt(e.errno))return console.warn("返回数据状态码错误！"),void i(e);t.$emit("afterGetData",e),a(e.data||{})},function(t){console.warn("获取数据请求失败！"),i(t)})})},switchNav:function(t){var e=this;e.CurrentNavigation=t,e.CurrentTimelimitFilter=(e.CurrentNavigation.filterEntities.timelimit||[])[0]||{},e.$emit("navigationSwitched",this),e.render()},switchTimelimitFilter:function(t){var e=this;e.CurrentTimelimitFilter=t,e.$emit("timelimitFilterSwitched",this),e.render()},isActiveNav:function(t){return this.CurrentNavigation.code===t.code},isActiveTimelimitFilter:function(t){return this.CurrentTimelimitFilter.code===t.code}}}},189:function(t,e,a){var i=a(12)(a(188),a(190),null,null);t.exports=i.exports},190:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.Navigation.length>0||t.isShow,expression:"Navigation.length>0||isShow"}],staticClass:"panel panel-default hour-trend"},[a("nav",{staticClass:"navbar navbar-default",staticStyle:{background:"#f5f5f5","margin-top":"30px","margin-bottom":"10px"},attrs:{role:"navigation"}},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"navbar-header"},[a("span",{staticClass:"navbar-brand",staticStyle:{"font-size":"16px"}},[t._v("\n                    "+t._s(t.chartTitle)+"\n                ")])]),t._v(" "),a("div",{attrs:{id:"titleHead"}},[a("swiper",{attrs:{options:t.swiperOption}},t._l(t.Navigation,function(e){return a("swiper-slide",[a("span",{class:{active:t.isActiveNav(e)},on:{click:function(a){t.switchNav(e)}}},[t._v(t._s(e.name))])])}))],1)])]),t._v(" "),a("div",{staticClass:"panel-body tab-content"},[a("div",{staticClass:"navbarRadio"},t._l(t.CurrentNavigation.filterEntities.timelimit,function(e){return a("label",[a("input",{attrs:{type:"radio",name:"timelimit_"+t._uid},domProps:{checked:t.isActiveTimelimitFilter(e)},on:{click:function(a){t.switchTimelimitFilter(e)}}}),t._v(t._s(e.name)+"\n            ")])})),t._v(" "),a("div",{ref:"chartContainer",staticClass:"tab-pane active"},[t._v("图表区域")])])])},staticRenderFns:[]}},198:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(189),n=a.n(i);e.default={data:function(){return{p4pykmmtCls:["dxCon","qdCon","hyCon"],timerMillisec:54e4,overallService:{url:"/dataweb/daychart/"},todayOverChart:[{name:"IP",code:"1"},{name:"PV",code:"2"},{name:"UV",code:"3"},{name:"付费会员",code:"4001"}],todayService:{url:"/dataweb/hourchart/"},realTimeData:{fight:[],feeuser:[],main:[]}}},components:{chartTendency:n.a},methods:{getClass:function(t){var e="";switch(t){case 0:e="bg-one";break;case 1:e="bg-two";break;case 2:e="bg-three";break;default:e="bg-four"}return e},differ:function(t,e,a){var i=t.replace(/[%,]/g,"")-e.replace(/[%,]/g,""),n={num:"",state:i>=0?"up":"down"};return t.indexOf("%")>0&&e.indexOf("%")>0?n.num=a?Math.abs(i.toFixed(2))+"%":i.toFixed(2)+"%":n.num=i>=0?a?this.toCurrencyString(i):"+"+this.toCurrencyString(i):a?this.toCurrencyString(Math.abs(i)):this.toCurrencyString(i),n},toCurrencyString:function(t){return String(t).replace(/\d(?=(?:\d{3})+\b)/g,"$&,")},percentum:function(t,e){var a=t.replace(/,/g,""),i=e.replace(/,/g,""),n=(a-i)/i;return 0==i?"100.00%":(100*Math.abs(n)).toFixed(2)+"%"},getRealDate:function(){var t=this;t.$http.get("/dataweb/abovedata").then(function(e){e=e.body,0==e.errno&&t.formatData(e.data.todaydata,e.data.yesterdaydata,e.data.weekdata,e.data.mipdata)},function(t){console.log("获取实时数据的接口数据失败！")})},formatData:function(t,e,a,i){var n=this,r=[];n.realTimeData.main=n.processData(t.main,e.main),n.realTimeData.weekdata=n.processWeekdata(t.main,a.main),n.realTimeData.p4pykmmt={"P4P会员":n.processData(t.p4p,e.p4p),"友客会员":n.processData(t.youke,e.youke),"MMT会员":n.processData(t.mmt,e.mmt)},t.fight.forEach(function(t,a){var i=e.fight[a].fightInfo,s=n.processData(t.fightInfo,i),o={name:t.name,fightInfo:s};r.push(o)}),r.length>0&&(n.realTimeData.fight=r)},getNowFormatDate:function(t){var e=new Date;e.setDate(e.getDate()+t);var a=e.getFullYear(),i=e.getMonth()+1,n=e.getDate();return n<=9&&(n="0"+n),i<=9&&(i="0"+i),a+"-"+i+"-"+n},processWeekdata:function(t,e){return e=e.map(function(e,a){return{name:e.name,num:e.num,today:t[a].num}})},processData:function(t,e){var a=[];return t.forEach(function(t){var i=e.filter(function(e){return e.name==t.name});i.length>0&&(t.yesterdayNum=i[0].num,a.push(t))}),a},redirect:function(t){var e={IP:"/datapanel/operation",PV:"/datapanel/operation",UV:"/datapanel/operation","付费会员":"/datapanel/member"},a=e[t.name.toUpperCase()];a&&this.$router.push(a)}},created:function(){this.getRealDate()},mounted:function(){var t=this;this.$refs.todayChartElement.$on("beforeRedraw",function(t){t.series.forEach(function(t,e){t.update({yAxis:0},!1)})}),this.$refs.overallChartElement.$on("dataReady",function(e){e.dataList=(e.dataList||[]).filter(function(e){return!!t.$privileges.user[(t.$privileges.mapping[e.name]||{}).id]})}),this.$refs.overallChartElement.$on("beforeRedraw",function(t){t.series.forEach(function(t,e){var a="PV"==t.name||"IP"==t.name||"UV"==t.name?1:0;t.update({yAxis:a},!1)})})}}},218:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-view app-overview-container",attrs:{id:"app-overview-container"}},[a("div",{staticClass:"padding-md clearfix"},[a("div",{staticClass:"panel panel-default panel-view realtime-counter"},[t._m(0,!1,!1),t._v(" "),a("div",{attrs:{id:"app-overview-todayRealtime"}},[a("div",{staticClass:"tab-contentBox"},[a("div",{staticClass:"tabBotCon"},[a("h3",{staticStyle:{"margin-bottom":"10px"}},[t._v("本网  "),a("span",{staticStyle:{float:"right","font-weight":"200"}},[t._v(t._s(t.getNowFormatDate(0)))])]),t._v(" "),t._l(t.realTimeData.main,function(e,i){return t.$privileges.user[(t.$privileges.mapping[e.name]||{}).id]?a("div",{key:i,staticClass:"col-sm-6 col-md-3",on:{click:function(a){t.redirect(e)}}},[a("div",{staticClass:"panel-stat realtime-source",class:t.getClass(i)},[a("h5",[t._v(" "+t._s(e.name)+" ")]),t._v(" "),a("h1",{staticClass:"realtime-value"},[t._v(" "+t._s(e.num)+" ")]),t._v(" "),a("span",{staticClass:"realtime-delta",staticStyle:{display:"block"}},[t._v(t._s(t.differ(e.num,e.yesterdayNum).num))]),t._v(" "),a("div",{staticClass:"realtime-predict"},[a("span",[t._v(" 昨日环比:")]),t._v(" "),a("span",{staticClass:"value"},[t._v(" "+t._s(e.yesterdayNum))]),t._v(" "),a("span",{staticClass:"pull-right"},[a("i",{class:"up"==t.differ(e.num,e.yesterdayNum).state?"icon-tt-up":"icon-tt-lower"}),t._v(" "),a("span",{staticClass:"delta"},[t._v(t._s(t.percentum(e.num,e.yesterdayNum)))])])]),t._v(" "),a("div",{staticClass:"realtime-week"},[a("span",[t._v(" 周同比:")]),t._v(" "),a("span",{staticClass:"value"},[t._v(" "+t._s(t.realTimeData.weekdata[i].num))]),t._v(" "),a("span",{staticClass:"pull-right"},[a("i",{class:"up"==t.differ(t.realTimeData.weekdata[i].today,t.realTimeData.weekdata[i].num).state?"icon-tt-up":"icon-tt-lower"}),t._v(" "),a("span",{staticClass:"delta"},[t._v(t._s(t.percentum(t.realTimeData.weekdata[i].today,t.realTimeData.weekdata[i].num)))])])])])]):t._e()})],2)])]),t._v(" "),a("div",{staticClass:"tab-contentBox"},[a("div",{staticClass:"tabBotCon"},[a("h3",[t._v("付费会员")]),t._v(" "),a("div",{staticClass:"uxerNumBox"},[a("div",{staticClass:"jgBox"},t._l(t.realTimeData.p4pykmmt,function(e,i){return t.$privileges.user[(t.$privileges.mapping[i]||{}).id]&&e.length?a("div",{key:i,staticClass:"jgCon"},[e.length?a("div",{staticClass:"jgTop"},[a("dl",[a("dt",[t._v(t._s(e[0].name)),a("span",[t._v(t._s(e[0].yesterdayNum))])]),t._v(" "),a("dd",[t._v("昨日环比："),a("span",{class:"up"==t.differ(e[0].num,e[0].yesterdayNum).state?"rigUp2":"rigDown2"},[t._v(t._s(t.percentum(e[0].num,e[0].yesterdayNum)))])])])]):t._e(),t._v(" "),a("div",{staticClass:"jgRigBox"},t._l(e,function(e,i){return 0!==i?a("div",{key:i,class:["jgRig",t.p4pykmmtCls[i-1]]},[a("dl",[a("dt",[t._v(t._s(e.name)),a("span",[t._v(t._s(e.yesterdayNum))])]),t._v(" "),a("dd",[a("span",{class:"up"==t.differ(e.num,e.yesterdayNum).state?"rigUp2":"rigDown2"},[t._v(t._s(t.percentum(e.num,e.yesterdayNum)))])])])]):t._e()}))]):t._e()}))])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.realTimeData.fight.length>0,expression:"realTimeData.fight.length>0"}],staticClass:"tab-contentBox2"},[a("div",{staticClass:"tabBotCon"},[a("h3",[t._v("战斗力")]),t._v(" "),a("div",{staticClass:"uxerNumBox"},t._l(t.realTimeData.fight,function(e,i){return a("div",{key:i,staticClass:"userNumCon znBoxList"},[a("div",{staticClass:"borderNone"},[a("h4",[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"uxerNumBox"},t._l(e.fightInfo,function(i,n){return t.$privileges.user[(t.$privileges.mapping[e.name+"-"+i.name]||{}).id]?a("div",{key:n,staticClass:"userNumCon"},[a("div",{staticClass:"userNumList"},[a("span",{staticClass:"userLeft"},[t._v(t._s(i.name))]),t._v(" "),a("span",{staticClass:"userRig",class:"up"==t.differ(i.num,i.yesterdayNum).state?"rigUp":"rigDown"},[t._v(t._s(t.differ(i.num,i.yesterdayNum,!0).num))]),t._v(" "),a("span",{staticClass:"userRig"},[t._v(t._s(i.num))])])]):t._e()}))])])}))])])]),t._v(" "),a("chartTendency",{ref:"todayChartElement",attrs:{navigation:t.todayOverChart,timermillisec:t.timerMillisec,service:t.todayService,chartTitle:"今日趋势"}}),t._v(" "),a("chartTendency",{ref:"overallChartElement",attrs:{timermillisec:t.timerMillisec,service:t.overallService,chartTitle:"整体趋势",isShow:"true"}})],1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar navbar-default",attrs:{role:"navigation"}},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"navbar-header"},[a("span",{staticClass:"navbar-brand"},[a("i",{staticClass:"icon-tt-timely"}),t._v("实时数据"),a("i",{staticClass:"icon-tt-help tooltip-view"})])]),t._v(" "),a("div",{staticClass:"collapse navbar-collapse navbar-right"},[a("ul",{staticClass:"nav navbar-nav fields"},[a("li",{staticClass:"app-count",staticStyle:{display:"none"}},[a("a",{staticClass:"field",attrs:{value:"app",href:"#app-overview-appRealtime-table"}},[t._v("累计")])])])])])])}]}}});